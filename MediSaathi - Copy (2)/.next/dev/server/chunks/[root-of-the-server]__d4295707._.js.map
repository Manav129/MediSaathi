{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/manav/Downloads/MediSaathi%20-%20Copy%20%282%29/MediSaathi%20-%20Copy%20%282%29/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js'\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey)\r\n\r\n// Database Types\r\nexport type Database = {\r\n  public: {\r\n    Tables: {\r\n      users: {\r\n        Row: {\r\n          id: string\r\n          email: string\r\n          full_name: string | null\r\n          avatar_url: string | null\r\n          user_type: 'patient' | 'doctor' | 'hospital'\r\n          phone: string | null\r\n          date_of_birth: string | null\r\n          gender: string | null\r\n          address: string | null\r\n          created_at: string\r\n          updated_at: string\r\n        }\r\n        Insert: {\r\n          id?: string\r\n          email: string\r\n          full_name?: string | null\r\n          avatar_url?: string | null\r\n          user_type: 'patient' | 'doctor' | 'hospital'\r\n          phone?: string | null\r\n          date_of_birth?: string | null\r\n          gender?: string | null\r\n          address?: string | null\r\n          created_at?: string\r\n          updated_at?: string\r\n        }\r\n        Update: {\r\n          id?: string\r\n          email?: string\r\n          full_name?: string | null\r\n          avatar_url?: string | null\r\n          user_type?: 'patient' | 'doctor' | 'hospital'\r\n          phone?: string | null\r\n          date_of_birth?: string | null\r\n          gender?: string | null\r\n          address?: string | null\r\n          updated_at?: string\r\n        }\r\n      }\r\n      family_members: {\r\n        Row: {\r\n          id: string\r\n          user_id: string\r\n          full_name: string\r\n          relationship: string\r\n          date_of_birth: string\r\n          gender: string\r\n          phone: string | null\r\n          emergency_contact: boolean\r\n          created_at: string\r\n          updated_at: string\r\n        }\r\n        Insert: {\r\n          id?: string\r\n          user_id: string\r\n          full_name: string\r\n          relationship: string\r\n          date_of_birth: string\r\n          gender: string\r\n          phone?: string | null\r\n          emergency_contact?: boolean\r\n          created_at?: string\r\n          updated_at?: string\r\n        }\r\n        Update: {\r\n          id?: string\r\n          user_id?: string\r\n          full_name?: string\r\n          relationship?: string\r\n          date_of_birth?: string\r\n          gender?: string\r\n          phone?: string | null\r\n          emergency_contact?: boolean\r\n          updated_at?: string\r\n        }\r\n      }\r\n      doctors: {\r\n        Row: {\r\n          id: string\r\n          user_id: string\r\n          specialty: string\r\n          license_number: string\r\n          experience_years: number\r\n          education: string | null\r\n          hospital_id: string | null\r\n          consultation_fee: number | null\r\n          available_days: string[]\r\n          available_hours: string\r\n          bio: string | null\r\n          rating: number\r\n          total_patients: number\r\n          created_at: string\r\n          updated_at: string\r\n        }\r\n        Insert: {\r\n          id?: string\r\n          user_id: string\r\n          specialty: string\r\n          license_number: string\r\n          experience_years: number\r\n          education?: string | null\r\n          hospital_id?: string | null\r\n          consultation_fee?: number | null\r\n          available_days?: string[]\r\n          available_hours?: string\r\n          bio?: string | null\r\n          rating?: number\r\n          total_patients?: number\r\n          created_at?: string\r\n          updated_at?: string\r\n        }\r\n        Update: {\r\n          id?: string\r\n          user_id?: string\r\n          specialty?: string\r\n          license_number?: string\r\n          experience_years?: number\r\n          education?: string | null\r\n          hospital_id?: string | null\r\n          consultation_fee?: number | null\r\n          available_days?: string[]\r\n          available_hours?: string\r\n          bio?: string | null\r\n          rating?: number\r\n          total_patients?: number\r\n          updated_at?: string\r\n        }\r\n      }\r\n      hospitals: {\r\n        Row: {\r\n          id: string\r\n          user_id: string\r\n          name: string\r\n          address: string\r\n          phone: string\r\n          email: string\r\n          website: string | null\r\n          license_number: string\r\n          total_beds: number\r\n          available_beds: number\r\n          departments: string[]\r\n          services: string[]\r\n          emergency_services: boolean\r\n          rating: number\r\n          created_at: string\r\n          updated_at: string\r\n        }\r\n        Insert: {\r\n          id?: string\r\n          user_id: string\r\n          name: string\r\n          address: string\r\n          phone: string\r\n          email: string\r\n          website?: string | null\r\n          license_number: string\r\n          total_beds: number\r\n          available_beds: number\r\n          departments: string[]\r\n          services: string[]\r\n          emergency_services?: boolean\r\n          rating?: number\r\n          created_at?: string\r\n          updated_at?: string\r\n        }\r\n        Update: {\r\n          id?: string\r\n          user_id?: string\r\n          name?: string\r\n          address?: string\r\n          phone?: string\r\n          email?: string\r\n          website?: string | null\r\n          license_number?: string\r\n          total_beds?: number\r\n          available_beds?: number\r\n          departments?: string[]\r\n          services?: string[]\r\n          emergency_services?: boolean\r\n          rating?: number\r\n          updated_at?: string\r\n        }\r\n      }\r\n      health_records: {\r\n        Row: {\r\n          id: string\r\n          user_id: string\r\n          family_member_id: string | null\r\n          title: string\r\n          type: 'lab_report' | 'prescription' | 'xray' | 'scan' | 'consultation' | 'other'\r\n          file_url: string | null\r\n          file_type: string | null\r\n          content: string | null\r\n          doctor_id: string | null\r\n          hospital_id: string | null\r\n          date_recorded: string\r\n          ai_summary: string | null\r\n          tags: string[]\r\n          is_critical: boolean\r\n          created_at: string\r\n          updated_at: string\r\n        }\r\n        Insert: {\r\n          id?: string\r\n          user_id: string\r\n          family_member_id?: string | null\r\n          title: string\r\n          type: 'lab_report' | 'prescription' | 'xray' | 'scan' | 'consultation' | 'other'\r\n          file_url?: string | null\r\n          file_type?: string | null\r\n          content?: string | null\r\n          doctor_id?: string | null\r\n          hospital_id?: string | null\r\n          date_recorded: string\r\n          ai_summary?: string | null\r\n          tags?: string[]\r\n          is_critical?: boolean\r\n          created_at?: string\r\n          updated_at?: string\r\n        }\r\n        Update: {\r\n          id?: string\r\n          user_id?: string\r\n          family_member_id?: string | null\r\n          title?: string\r\n          type?: 'lab_report' | 'prescription' | 'xray' | 'scan' | 'consultation' | 'other'\r\n          file_url?: string | null\r\n          file_type?: string | null\r\n          content?: string | null\r\n          doctor_id?: string | null\r\n          hospital_id?: string | null\r\n          date_recorded?: string\r\n          ai_summary?: string | null\r\n          tags?: string[]\r\n          is_critical?: boolean\r\n          updated_at?: string\r\n        }\r\n      }\r\n      vital_signs: {\r\n        Row: {\r\n          id: string\r\n          user_id: string\r\n          family_member_id: string | null\r\n          type: 'blood_pressure' | 'heart_rate' | 'temperature' | 'weight' | 'height' | 'blood_sugar' | 'oxygen_saturation'\r\n          value: string\r\n          unit: string\r\n          notes: string | null\r\n          recorded_at: string\r\n          created_at: string\r\n        }\r\n        Insert: {\r\n          id?: string\r\n          user_id: string\r\n          family_member_id?: string | null\r\n          type: 'blood_pressure' | 'heart_rate' | 'temperature' | 'weight' | 'height' | 'blood_sugar' | 'oxygen_saturation'\r\n          value: string\r\n          unit: string\r\n          notes?: string | null\r\n          recorded_at: string\r\n          created_at?: string\r\n        }\r\n        Update: {\r\n          id?: string\r\n          user_id?: string\r\n          family_member_id?: string | null\r\n          type?: 'blood_pressure' | 'heart_rate' | 'temperature' | 'weight' | 'height' | 'blood_sugar' | 'oxygen_saturation'\r\n          value?: string\r\n          unit?: string\r\n          notes?: string | null\r\n          recorded_at?: string\r\n        }\r\n      }\r\n      appointments: {\r\n        Row: {\r\n          id: string\r\n          patient_id: string\r\n          doctor_id: string\r\n          hospital_id: string | null\r\n          appointment_date: string\r\n          appointment_time: string\r\n          duration: number\r\n          type: 'consultation' | 'follow_up' | 'emergency' | 'telemedicine'\r\n          status: 'scheduled' | 'confirmed' | 'in_progress' | 'completed' | 'cancelled' | 'no_show'\r\n          reason: string\r\n          notes: string | null\r\n          prescription_id: string | null\r\n          fee: number | null\r\n          payment_status: 'pending' | 'paid' | 'refunded'\r\n          created_at: string\r\n          updated_at: string\r\n        }\r\n        Insert: {\r\n          id?: string\r\n          patient_id: string\r\n          doctor_id: string\r\n          hospital_id?: string | null\r\n          appointment_date: string\r\n          appointment_time: string\r\n          duration?: number\r\n          type: 'consultation' | 'follow_up' | 'emergency' | 'telemedicine'\r\n          status?: 'scheduled' | 'confirmed' | 'in_progress' | 'completed' | 'cancelled' | 'no_show'\r\n          reason: string\r\n          notes?: string | null\r\n          prescription_id?: string | null\r\n          fee?: number | null\r\n          payment_status?: 'pending' | 'paid' | 'refunded'\r\n          created_at?: string\r\n          updated_at?: string\r\n        }\r\n        Update: {\r\n          id?: string\r\n          patient_id?: string\r\n          doctor_id?: string\r\n          hospital_id?: string | null\r\n          appointment_date?: string\r\n          appointment_time?: string\r\n          duration?: number\r\n          type?: 'consultation' | 'follow_up' | 'emergency' | 'telemedicine'\r\n          status?: 'scheduled' | 'confirmed' | 'in_progress' | 'completed' | 'cancelled' | 'no_show'\r\n          reason?: string\r\n          notes?: string | null\r\n          prescription_id?: string | null\r\n          fee?: number | null\r\n          payment_status?: 'pending' | 'paid' | 'refunded'\r\n          updated_at?: string\r\n        }\r\n      }\r\n      prescriptions: {\r\n        Row: {\r\n          id: string\r\n          doctor_id: string\r\n          patient_id: string\r\n          appointment_id: string | null\r\n          medications: any[]\r\n          instructions: string | null\r\n          valid_until: string\r\n          status: 'active' | 'expired' | 'cancelled'\r\n          created_at: string\r\n          updated_at: string\r\n        }\r\n        Insert: {\r\n          id?: string\r\n          doctor_id: string\r\n          patient_id: string\r\n          appointment_id?: string | null\r\n          medications: any[]\r\n          instructions?: string | null\r\n          valid_until: string\r\n          status?: 'active' | 'expired' | 'cancelled'\r\n          created_at?: string\r\n          updated_at?: string\r\n        }\r\n        Update: {\r\n          id?: string\r\n          doctor_id?: string\r\n          patient_id?: string\r\n          appointment_id?: string | null\r\n          medications?: any[]\r\n          instructions?: string | null\r\n          valid_until?: string\r\n          status?: 'active' | 'expired' | 'cancelled'\r\n          updated_at?: string\r\n        }\r\n      }\r\n    }\r\n  }\r\n}"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,yMAAY,EAAC,aAAa"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/manav/Downloads/MediSaathi%20-%20Copy%20%282%29/MediSaathi%20-%20Copy%20%282%29/lib/services/appointment.service.ts"],"sourcesContent":["import { supabase } from '@/lib/supabase'\r\nimport type { Database } from '@/lib/supabase'\r\n\r\ntype Appointment = Database['public']['Tables']['appointments']['Row']\r\ntype AppointmentInsert = Database['public']['Tables']['appointments']['Insert']\r\ntype AppointmentUpdate = Database['public']['Tables']['appointments']['Update']\r\n\r\nexport class AppointmentService {\r\n  // Get appointments for patient\r\n  static async getPatientAppointments(patientId: string, status?: string) {\r\n    try {\r\n      let query = supabase\r\n        .from('appointments')\r\n        .select(`\r\n          *,\r\n          doctors:doctor_id(\r\n            id,\r\n            users!doctors_user_id_fkey(full_name, avatar_url),\r\n            specialty,\r\n            consultation_fee\r\n          ),\r\n          hospitals:hospital_id(name, address, phone)\r\n        `)\r\n        .eq('patient_id', patientId)\r\n\r\n      if (status) {\r\n        query = query.eq('status', status)\r\n      }\r\n\r\n      const { data, error } = await query\r\n        .order('appointment_date', { ascending: true })\r\n        .order('appointment_time', { ascending: true })\r\n\r\n      if (error) throw error\r\n      return { data, error: null }\r\n    } catch (error) {\r\n      return { data: null, error }\r\n    }\r\n  }\r\n\r\n  // Get appointments for doctor\r\n  static async getDoctorAppointments(doctorId: string, date?: string) {\r\n    try {\r\n      let query = supabase\r\n        .from('appointments')\r\n        .select(`\r\n          *,\r\n          patients:patient_id(full_name, avatar_url, phone, date_of_birth),\r\n          hospitals:hospital_id(name)\r\n        `)\r\n        .eq('doctor_id', doctorId)\r\n\r\n      if (date) {\r\n        query = query.eq('appointment_date', date)\r\n      }\r\n\r\n      const { data, error } = await query\r\n        .order('appointment_date', { ascending: true })\r\n        .order('appointment_time', { ascending: true })\r\n\r\n      if (error) throw error\r\n      return { data, error: null }\r\n    } catch (error) {\r\n      return { data: null, error }\r\n    }\r\n  }\r\n\r\n  // Get appointments for hospital\r\n  static async getHospitalAppointments(hospitalId: string, date?: string) {\r\n    try {\r\n      let query = supabase\r\n        .from('appointments')\r\n        .select(`\r\n          *,\r\n          patients:patient_id(full_name, phone),\r\n          doctors:doctor_id(\r\n            users!doctors_user_id_fkey(full_name),\r\n            specialty\r\n          )\r\n        `)\r\n        .eq('hospital_id', hospitalId)\r\n\r\n      if (date) {\r\n        query = query.eq('appointment_date', date)\r\n      }\r\n\r\n      const { data, error } = await query\r\n        .order('appointment_date', { ascending: true })\r\n        .order('appointment_time', { ascending: true })\r\n\r\n      if (error) throw error\r\n      return { data, error: null }\r\n    } catch (error) {\r\n      return { data: null, error }\r\n    }\r\n  }\r\n\r\n  // Book new appointment\r\n  static async bookAppointment(appointmentData: AppointmentInsert) {\r\n    try {\r\n      // Check for conflicts\r\n      const { data: conflicts } = await supabase\r\n        .from('appointments')\r\n        .select('*')\r\n        .eq('doctor_id', appointmentData.doctor_id)\r\n        .eq('appointment_date', appointmentData.appointment_date)\r\n        .eq('appointment_time', appointmentData.appointment_time)\r\n        .neq('status', 'cancelled')\r\n\r\n      if (conflicts && conflicts.length > 0) {\r\n        throw new Error('Time slot already booked')\r\n      }\r\n\r\n      const { data, error } = await supabase\r\n        .from('appointments')\r\n        .insert(appointmentData)\r\n        .select(`\r\n          *,\r\n          doctors:doctor_id(\r\n            users!doctors_user_id_fkey(full_name),\r\n            specialty,\r\n            consultation_fee\r\n          )\r\n        `)\r\n        .single()\r\n\r\n      if (error) throw error\r\n      return { data, error: null }\r\n    } catch (error) {\r\n      return { data: null, error }\r\n    }\r\n  }\r\n\r\n  // Update appointment\r\n  static async updateAppointment(appointmentId: string, updates: AppointmentUpdate) {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('appointments')\r\n        .update(updates)\r\n        .eq('id', appointmentId)\r\n        .select()\r\n        .single()\r\n\r\n      if (error) throw error\r\n      return { data, error: null }\r\n    } catch (error) {\r\n      return { data: null, error }\r\n    }\r\n  }\r\n\r\n  // Cancel appointment\r\n  static async cancelAppointment(appointmentId: string, reason?: string) {\r\n    try {\r\n      const { data, error } = await supabase\r\n        .from('appointments')\r\n        .update({ \r\n          status: 'cancelled',\r\n          notes: reason ? `Cancelled: ${reason}` : 'Cancelled'\r\n        })\r\n        .eq('id', appointmentId)\r\n        .select()\r\n        .single()\r\n\r\n      if (error) throw error\r\n      return { data, error: null }\r\n    } catch (error) {\r\n      return { data: null, error }\r\n    }\r\n  }\r\n\r\n  // Get available time slots for doctor\r\n  static async getAvailableSlots(doctorId: string, date: string) {\r\n    try {\r\n      // Get doctor's working hours and existing appointments\r\n      const [doctorData, appointmentsData] = await Promise.all([\r\n        supabase\r\n          .from('doctors')\r\n          .select('available_hours, available_days')\r\n          .eq('id', doctorId)\r\n          .single(),\r\n        supabase\r\n          .from('appointments')\r\n          .select('appointment_time, duration')\r\n          .eq('doctor_id', doctorId)\r\n          .eq('appointment_date', date)\r\n          .neq('status', 'cancelled')\r\n      ])\r\n\r\n      if (doctorData.error) throw doctorData.error\r\n\r\n      const doctor = doctorData.data\r\n      const appointments = appointmentsData.data || []\r\n\r\n      // Parse working hours (e.g., \"09:00-17:00\")\r\n      const [startTime, endTime] = doctor.available_hours.split('-')\r\n      \r\n      // Generate 30-minute slots\r\n      const slots = []\r\n      const start = new Date(`2000-01-01T${startTime}`)\r\n      const end = new Date(`2000-01-01T${endTime}`)\r\n      \r\n      while (start < end) {\r\n        const timeStr = start.toTimeString().slice(0, 5)\r\n        \r\n        // Check if slot is already booked\r\n        const isBooked = appointments.some(apt => {\r\n          const aptTime = new Date(`2000-01-01T${apt.appointment_time}`)\r\n          const aptEnd = new Date(aptTime.getTime() + (apt.duration || 30) * 60000)\r\n          const slotTime = new Date(`2000-01-01T${timeStr}`)\r\n          const slotEnd = new Date(slotTime.getTime() + 30 * 60000)\r\n          \r\n          return (slotTime < aptEnd && slotEnd > aptTime)\r\n        })\r\n        \r\n        if (!isBooked) {\r\n          slots.push(timeStr)\r\n        }\r\n        \r\n        start.setMinutes(start.getMinutes() + 30)\r\n      }\r\n\r\n      return { data: slots, error: null }\r\n    } catch (error) {\r\n      return { data: null, error }\r\n    }\r\n  }\r\n\r\n  // Get appointment statistics\r\n  static async getAppointmentStats(doctorId?: string, hospitalId?: string, startDate?: string, endDate?: string) {\r\n    try {\r\n      let query = supabase.from('appointments').select('status, type, created_at')\r\n\r\n      if (doctorId) query = query.eq('doctor_id', doctorId)\r\n      if (hospitalId) query = query.eq('hospital_id', hospitalId)\r\n      if (startDate) query = query.gte('appointment_date', startDate)\r\n      if (endDate) query = query.lte('appointment_date', endDate)\r\n\r\n      const { data, error } = await query\r\n\r\n      if (error) throw error\r\n\r\n      const stats = {\r\n        total: data?.length || 0,\r\n        byStatus: {} as Record<string, number>,\r\n        byType: {} as Record<string, number>,\r\n        completed: 0,\r\n        cancelled: 0,\r\n        revenue: 0\r\n      }\r\n\r\n      data?.forEach(appointment => {\r\n        stats.byStatus[appointment.status] = (stats.byStatus[appointment.status] || 0) + 1\r\n        stats.byType[appointment.type] = (stats.byType[appointment.type] || 0) + 1\r\n        \r\n        if (appointment.status === 'completed') stats.completed++\r\n        if (appointment.status === 'cancelled') stats.cancelled++\r\n      })\r\n\r\n      return { data: stats, error: null }\r\n    } catch (error) {\r\n      return { data: null, error }\r\n    }\r\n  }\r\n\r\n  // Get upcoming appointments (next 7 days)\r\n  static async getUpcomingAppointments(userId: string, userType: 'patient' | 'doctor') {\r\n    try {\r\n      const today = new Date().toISOString().split('T')[0]\r\n      const nextWeek = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]\r\n\r\n      let query = supabase\r\n        .from('appointments')\r\n        .select(`\r\n          *,\r\n          ${userType === 'patient' ? 'doctors:doctor_id(users!doctors_user_id_fkey(full_name), specialty)' : 'patients:patient_id(full_name)'}\r\n        `)\r\n        .gte('appointment_date', today)\r\n        .lte('appointment_date', nextWeek)\r\n        .in('status', ['scheduled', 'confirmed'])\r\n\r\n      if (userType === 'patient') {\r\n        query = query.eq('patient_id', userId)\r\n      } else {\r\n        // For doctors, need to get doctor record first\r\n        const { data: doctorData } = await supabase\r\n          .from('doctors')\r\n          .select('id')\r\n          .eq('user_id', userId)\r\n          .single()\r\n\r\n        if (doctorData) {\r\n          query = query.eq('doctor_id', doctorData.id)\r\n        }\r\n      }\r\n\r\n      const { data, error } = await query\r\n        .order('appointment_date', { ascending: true })\r\n        .order('appointment_time', { ascending: true })\r\n\r\n      if (error) throw error\r\n      return { data, error: null }\r\n    } catch (error) {\r\n      return { data: null, error }\r\n    }\r\n  }\r\n\r\n  // Send appointment reminders\r\n  static async sendReminders() {\r\n    try {\r\n      // Get appointments for tomorrow\r\n      const tomorrow = new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString().split('T')[0]\r\n      \r\n      const { data, error } = await supabase\r\n        .from('appointments')\r\n        .select(`\r\n          *,\r\n          patients:patient_id(full_name, email, phone),\r\n          doctors:doctor_id(users!doctors_user_id_fkey(full_name))\r\n        `)\r\n        .eq('appointment_date', tomorrow)\r\n        .eq('status', 'confirmed')\r\n\r\n      if (error) throw error\r\n\r\n      // Here you would integrate with your notification system\r\n      // For now, return the appointments that need reminders\r\n      return { data: data || [], error: null }\r\n    } catch (error) {\r\n      return { data: null, error }\r\n    }\r\n  }\r\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 366, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/manav/Downloads/MediSaathi%20-%20Copy%20%282%29/MediSaathi%20-%20Copy%20%282%29/app/api/appointments/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server'\r\nimport { supabase } from '@/lib/supabase'\r\nimport { AppointmentService } from '@/lib/services/appointment.service'\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const { searchParams } = new URL(request.url)\r\n    const userId = searchParams.get('userId')\r\n    const doctorId = searchParams.get('doctorId')\r\n    const userType = searchParams.get('userType')\r\n    const action = searchParams.get('action')\r\n    const date = searchParams.get('date')\r\n\r\n    // Handle doctor-specific queries\r\n    if (doctorId && date) {\r\n      // Get appointments for a specific doctor on a specific date\r\n      const { data: appointments, error } = await supabase\r\n        .from('appointments')\r\n        .select(`\r\n          id,\r\n          appointment_date,\r\n          appointment_time,\r\n          status,\r\n          notes,\r\n          appointment_type,\r\n          is_urgent,\r\n          patients:patient_id (\r\n            id,\r\n            users:user_id (\r\n              id,\r\n              full_name,\r\n              email,\r\n              avatar_url,\r\n              date_of_birth\r\n            )\r\n          )\r\n        `)\r\n        .eq('doctor_id', doctorId)\r\n        .eq('appointment_date', date)\r\n        .order('appointment_time', { ascending: true })\r\n\r\n      if (error) {\r\n        console.error('Database error:', error)\r\n        return NextResponse.json({ \r\n          success: false, \r\n          error: 'Failed to fetch doctor appointments',\r\n          details: error.message\r\n        }, { status: 500 })\r\n      }\r\n\r\n      return NextResponse.json({ \r\n        success: true, \r\n        data: appointments || [] \r\n      })\r\n    }\r\n\r\n    // Handle patient-specific queries (existing logic)\r\n    if (!userId) {\r\n      return NextResponse.json({ \r\n        success: false, \r\n        error: 'User ID or Doctor ID is required' \r\n      }, { status: 400 })\r\n    }\r\n\r\n    if (action === 'upcoming' || !action) {\r\n      // Get upcoming appointments for patient\r\n      const { data: appointments, error } = await supabase\r\n        .from('appointments')\r\n        .select(`\r\n          id,\r\n          appointment_date,\r\n          appointment_time,\r\n          status,\r\n          notes,\r\n          doctors:doctor_id (\r\n            id,\r\n            specialty,\r\n            users:user_id (\r\n              full_name,\r\n              email\r\n            )\r\n          )\r\n        `)\r\n        .eq('patient_id', userId)\r\n        .gte('appointment_date', new Date().toISOString().split('T')[0])\r\n        .order('appointment_date', { ascending: true })\r\n        .limit(10)\r\n\r\n      if (error) {\r\n        console.error('Database error:', error)\r\n        return NextResponse.json({ \r\n          success: false, \r\n          error: 'Failed to fetch appointments',\r\n          details: error.message\r\n        }, { status: 500 })\r\n      }\r\n\r\n      return NextResponse.json({ \r\n        success: true, \r\n        data: appointments || [] \r\n      })\r\n    }\r\n\r\n    return NextResponse.json({ \r\n      success: false, \r\n      error: 'Invalid action' \r\n    }, { status: 400 })\r\n\r\n  } catch (error) {\r\n    console.error('Appointments API error:', error)\r\n    return NextResponse.json({ \r\n      success: false, \r\n      error: 'Internal server error',\r\n      details: error instanceof Error ? error.message : 'Unknown error'\r\n    }, { status: 500 })\r\n  }\r\n}\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    const body = await request.json()\r\n    const { action, appointmentData } = body\r\n\r\n    switch (action) {\r\n      case 'book':\r\n        if (!appointmentData.patient_id || !appointmentData.doctor_id || !appointmentData.appointment_date || !appointmentData.appointment_time) {\r\n          return NextResponse.json({ success: false, error: 'Required appointment data missing' }, { status: 400 })\r\n        }\r\n        \r\n        const bookResult = await AppointmentService.bookAppointment(appointmentData)\r\n        if (bookResult.error) throw bookResult.error\r\n        \r\n        return NextResponse.json({ \r\n          success: true, \r\n          data: bookResult.data,\r\n          message: 'Appointment booked successfully' \r\n        })\r\n\r\n      default:\r\n        return NextResponse.json({ success: false, error: 'Invalid action' }, { status: 400 })\r\n    }\r\n  } catch (error) {\r\n    console.error('Appointment Booking Error:', error)\r\n    return NextResponse.json({ \r\n      success: false, \r\n      error: error instanceof Error ? error.message : 'Failed to book appointment' \r\n    }, { status: 400 })\r\n  }\r\n}\r\n\r\nexport async function PUT(request: NextRequest) {\r\n  try {\r\n    const body = await request.json()\r\n    const { action, appointmentId, updates, reason } = body\r\n\r\n    if (!appointmentId) {\r\n      return NextResponse.json({ success: false, error: 'Appointment ID required' }, { status: 400 })\r\n    }\r\n\r\n    switch (action) {\r\n      case 'update':\r\n        const updateResult = await AppointmentService.updateAppointment(appointmentId, updates)\r\n        if (updateResult.error) throw updateResult.error\r\n        \r\n        return NextResponse.json({ \r\n          success: true, \r\n          data: updateResult.data,\r\n          message: 'Appointment updated successfully' \r\n        })\r\n\r\n      case 'cancel':\r\n        const cancelResult = await AppointmentService.cancelAppointment(appointmentId, reason)\r\n        if (cancelResult.error) throw cancelResult.error\r\n        \r\n        return NextResponse.json({ \r\n          success: true, \r\n          data: cancelResult.data,\r\n          message: 'Appointment cancelled successfully' \r\n        })\r\n\r\n      default:\r\n        return NextResponse.json({ success: false, error: 'Invalid action' }, { status: 400 })\r\n    }\r\n  } catch (error) {\r\n    console.error('Appointment Update Error:', error)\r\n    return NextResponse.json({ success: false, error: 'Failed to update appointment' }, { status: 500 })\r\n  }\r\n}"],"names":[],"mappings":"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"}}]
}